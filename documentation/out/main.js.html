<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: main.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: main.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// Declare Classes  ######################################################################
/**
 * @class - Represents all page sound effects courtesy w3schools
 * @param { string } src - path to sound file
 */
class Sound {
    constructor(src) {
        this.sound = document.createElement("audio");
        this.sound.src = src;
        this.sound.setAttribute("preload", "auto");
        this.sound.setAttribute("controls", "none");
        this.sound.style.display = "none";
        this.sound.volume = 0;
        document.body.appendChild(this.sound);
        /** @function  - plays a sound file */
        this.play = function () {
            this.sound.play();
        };
        this.stop = function () {
            this.sound.pause();
        };
    }
}

// Declare variables  ######################################################################
/** @type { string } category of questions selected */
let category = "18";
/** @type { string } quantity of questions selected */
let amount = "5";
/** @type { string } difficulty level of questions selected */
let difficulty = "easy";
/** @type { string } token to access API */
let token = "";
/** @type { string } correct answer to current question */
let correctAnswer = "";
/** @type { number } number of correct answers current quiz */
let score = 0;
/** @type { number } array index number of current question */
let questionIndex = 0;
/** @type { Object } current set of questions &amp; answers */
let setOfQuestions = {};
/** @type { Object } highest score achieved by user in each category represented as an object */
let highScore = 0;
/** @type { number } the id of the setInterval timer function */
let countdown = 0;
/** @type { number } question timer length in seconds */
let questionTimer = 20;
/** @type { number } number of seconds remaining on the timer */
let secondsLeft = 0;
/** @type { Object } new instance of the sound class representing a correct answer */
let correctAnswerSound = new Sound("assets/sounds/correct-answer.mp3");
/** @type { Object } new instance of the sound class representing a wrong answer */
let wrongAnswerSound = new Sound("assets/sounds/wrong-answer.mp3");
/** @type { Object } new instance of the sound class representing a button press */
let buttonPress = new Sound("assets/sounds/button-press.mp3");
/** @type { Object } new instance of the sound class representing a new high score */
let highScoreSound = new Sound("assets/sounds/new-high-score.mp3");
/** @type { Object } new instance of the sound class representing a well done score */
let wellDoneSound = new Sound("assets/sounds/well-done.mp3");
/** @type { Object } new instance of the sound class representing a sad score */
let sadSound = new Sound("assets/sounds/sad-sound.mp3");
/** @type { Object } contains all answer buttons */
let answerButtons = $(".question-answers").children("button");
/** @type { string } opentdb API url address to obtain token */
let tokenUrl = "https://opentdb.com/api_token.php?command=request";
/** @type { Object } contains buttons representing quiz category options */
let categoryButtons = $(".categories").children("button");
/** @type { Object } contains buttons representing quiz difficulty options */
let difficultyButtons = $(".difficulty-level").children("button");
/** @type { Object } contains buttons representing quiz quantity of questions options */
let quantityButtons = $(".question-quantity").children("button");
/** @type { string } translates the category from numerical identifier to text */
let categoryString = "";
/** @type { string } general error message to be alerted to user */
let alertErrorMessage = "Press below to try again or refresh the page. If the problem persists, please contact the administrator.";

// Check and retrieve Local and Session Storage Values  ######################################################################
/**
 * Checks local storage for a high score object
 */
if (localStorage.getItem("highScore")) {
    console.log("highscore exists");    
    highScore = JSON.parse(localStorage.getItem("highScore"));
    $(".computing-score").html(`${highScore["computing"]}`);
    $(".maths-score").html(`${highScore["mathematics"]}`);
    $(".general-science-score").html(`${highScore["general"]}`);
} else {
    highScore = {
    computing: 0,
    mathematics: 0,
    general: 0 
    };
}
console.log(highScore);

/**
 * Checks session storage if a token already exists
 */
if (sessionStorage.getItem("sessionToken")) {
    token = sessionStorage.getItem("sessionToken");
    console.log("sessionToken", token);
}

// Normal Functions  ######################################################################
/**
 * @function - scrolls to top on page load
 * @returns { void } nothing
 */
$(document).ready(function() {
    window.scroll(0, 0);
});

/**
 * @function - switches between quiz options and quiz questions
 * @returns { void } nothing
 */
function toggleOptions() {
    // show quiz questions and answers
    if ($(".quiz-options").css("display") != "none") {
        // timeout to allow countdown timer to start
        setTimeout(function() {
            $(".answer").removeClass("disable");
        }, 1200);
        $(".quiz-options, .controls-container header").fadeOut(300, function() {
            $(".question-container").fadeIn(500);
            if (screen.availHeight &lt; 1000) {
                $(".controls-container header").hide();
                let elem = $(".questions")[0];
                elem.scrollIntoView();
            } else {
                $(".heading-text h2").hide();
                $(".controls-container header").fadeIn(500);
                window.scroll(0, 0);
            }
        });
    } else {
        // show quiz options
        $(".next-question").removeClass("finish-button").html(
            `&lt;p class="quiz-score">Score is ${score} / ${setOfQuestions.length}&lt;/p>
            Next Question 
            &lt;i class="fas fa-caret-right">&lt;/i>`);
        enableElement(".quiz-options .btn");
        $(".load-questions").removeClass("reduce-size").html("Start!");
        $(".question-container").fadeOut(300, function() {
            $(".heading-text h2").show();
            $(".quiz-options, .controls-container header").fadeIn(700);
            if (screen.availHeight &lt; 1000) {
                let elem = $(".mute-sound")[0];
                elem.scrollIntoView();
            } else {
                window.scroll(0, 0);
            }
        });
    }
}

/**
 * @function - Shuffles questions using The Fisher-Yates Shuffle Method
 * @param { Array } arrayOfAnswers - the array to be shuffled
 * @param { string } currentCorrectAnswer - to be pushed into the array before shuffling
 * @returns { void } nothing
 */
function shuffleAnswers(arrayOfAnswers, currentCorrectAnswer) {
    // Validate the array of answers to contain at most, 3 answers
    while (arrayOfAnswers.length > 3) {
        arrayOfAnswers.pop();
    }
    arrayOfAnswers.push(currentCorrectAnswer);
    for (let i = arrayOfAnswers.length - 1; i > 0; i--) {
        let j = Math.floor(Math.random() * i);
        let k = arrayOfAnswers[i];
        arrayOfAnswers[i] = arrayOfAnswers[j];
        arrayOfAnswers[j] = k;
    }
}

/**
 * @function - Prepares and presents the quiz questions to the screen
 * @param { Object } arrayOfQuestions - current set of questions &amp; answers
 * @param { number } arrayIndex - array index number of current question
 * @param { number } currentScore - number of correct answers current quiz
 * @returns { void } nothing
 */
function askQuestions(arrayOfQuestions, arrayIndex, currentScore) {
    /** @type { string } current question */
    let currentQuestion = arrayOfQuestions[arrayIndex].question;
    /** @type { Array } array of incorrect answers to current question */
    let answersArray = arrayOfQuestions[arrayIndex].incorrect_answers; 
    timer(questionTimer);   
    // Prepare the various buttons
    $(".answer").removeClass("correct-answer wrong-answer no-shadow");
    disableElement(".next-question");
    // Assign the correct answer
    correctAnswer = arrayOfQuestions[arrayIndex].correct_answer;
    shuffleAnswers(answersArray, correctAnswer);
    $(".quiz-score").html(`Score is ${currentScore} / ${setOfQuestions.length}`);
    // check if question is boolean and if yes, hide redundant answer buttons
    checkBoolean(arrayOfQuestions, arrayIndex, answersArray);    
    $(".questions").html(`${arrayIndex + 1}. ${currentQuestion}`);
    arrayIndex++;
    console.log(answersArray, (correctAnswer));
    console.log(arrayIndex);
}

/**
 * @function - Removes surplus answer buttons if the current question
 * is boolean rather than multiple choice &amp; populates the answer buttons
 * @param { Object } arrayOfQuestions - current set of questions &amp; answers
 * @param { number } arrayIndex - array index number of current question
 * @param { Array } arrayOfAnswers - array of answers to the current question
 * @returns { void } nothing
 */
function checkBoolean(arrayOfQuestions, arrayIndex, arrayOfAnswers) {
    if (arrayOfQuestions[arrayIndex].type === "boolean") {
        $("[data-number='3']").css("display", "none");
        $("[data-number='4']").css("display", "none");
        // populating answer buttons for boolean choice questions
        $("[data-number='1']").html(`&lt;p>True &lt;span class="tick">&lt;/span>&lt;/p>`);
        $("[data-number='1']").attr("data-answer", "True");
        $("[data-number='2']").html(`&lt;p>False &lt;span class="tick">&lt;/span>&lt;/p>`);
        $("[data-number='2']").attr("data-answer", "False");
    } else {
        $("[data-number='3']").css("display", "block");
        $("[data-number='4']").css("display", "block");
        // populating answer buttons for multiple choice questions
        for (let i = 0; i &lt;= 3; i++) {
            $(`[data-number='${i + 1}']`).html(`&lt;p>${arrayOfAnswers[i]} &lt;span class="tick">&lt;/span>&lt;/p>`);
            $(`[data-number='${i + 1}']`).attr("data-answer", `${arrayOfAnswers[i]}`);
        }
    }        
}

/**
 * @function - Moves the quiz to the next question
 * @returns { void } nothing
 */
function nextQuestion() {
    buttonPress.play();
    disableElement(".next-question");
    $(".display__time-left").removeClass("time-critical");
    $(".answer-feedback").addClass("hide-element");
    questionIndex++;
    // fade out/in to the next question
    if (questionIndex &lt; setOfQuestions.length) {
        $(".question-container, .status-info").fadeOut(500, function() {
            $(".question-container, .status-info").fadeIn(1000);
            if (screen.availHeight &lt; 1000) {
                let elem = $(".questions")[0];
                elem.scrollIntoView();
            } else {
                window.scroll(0, 0);
            }
        });
        // timeout to allow for the fade out/in of next question
        setTimeout(function() {
            askQuestions(setOfQuestions, questionIndex, score);
        }, 500);
        // timeout to allow the timer to start
        setTimeout(function() {
            $(".answer").removeClass("disable");
        }, 1200);
        // display a finish button for the last question
        if (questionIndex === (setOfQuestions.length - 1)) {
            $(".next-question").addClass("finish-button").html(
                `&lt;p class="quiz-score">Score is ${score} / ${setOfQuestions.length}&lt;/p>
                Press To Finish 
                &lt;i class="fas fa-caret-right">&lt;/i>`);
            $(".reset-button").hide();
        }
    } else {
        finishQuiz(questionIndex);
    }
}

/**
 * @function - Finishes the quiz by presenting a results model to the screen
 * and updating the high score in local storage if required
 * @param { number } arrayIndex - array index number of current question
 * @returns { void } nothing
 */
function finishQuiz(arrayIndex) {
    let weightedScore = 0;
    $(".modal-content").html(
        `&lt;div class="modal-div">
            &lt;h5 class="reset-modal" id="resetModalLabel">Well Done!&lt;/h5>
        &lt;/div>
        &lt;div class="modal-body">
        &lt;/div>
        &lt;div class="modal-footer">
            &lt;button type="button" class="btn btn-primary reset-confirm" onclick="resetConfirm()">Exit&lt;/button>
        &lt;/div>`);
    if (difficulty === "medium") {
        weightedScore = Math.round(score * 1.2);
    } else if (difficulty === "hard") {
        weightedScore = Math.round(score * 1.5);
    } else {
        weightedScore = score;
    }
    if (score === 0) {
        sadSound.play();
        $(".reset-modal").html("Better Luck Next Time!");
    } else if (weightedScore > highScore[categoryString]) {
        highScoreSound.play();
        $(".reset-modal").html(`A New High Score for the ${(categoryString[0].toUpperCase() + categoryString.slice(1, categoryString.length))} Category. Well Done!`);        
    } else {
        wellDoneSound.play();
        $(".reset-modal").html("Well Done!");
    }
    $(".modal-body").html(`You scored ${score} out of ${arrayIndex} questions. The weighted score for ${difficulty} difficulty is ${weightedScore}.`);
    if (weightedScore > highScore[categoryString]) {
        highScore[categoryString] = weightedScore;
        localStorage.setItem("highScore", JSON.stringify(highScore));
        $(".computing-score").html(`${highScore["computing"]}`);
        $(".maths-score").html(`${highScore["mathematics"]}`);
        $(".general-science-score").html(`${highScore["general"]}`);
    }
    $("#resetModal").modal("toggle");
}

/**
 * @function - Submits an answer to be checked and resets the timer
 * @returns { void } nothing
 */
function submitAnswer() {
    clearInterval(countdown);
    $(".display__time-left").html(`Answered with ${secondsLeft} seconds to spare.`).removeClass("time-critical");
    // Check if answer is correct
    setTimeout(function() {
        checkAnswer();
    }, 1200);
}

/**
 * @function - Checks if an answer is correct and provides visual feedback
 * @returns { void } nothing
 */
function checkAnswer() {
    for (let button of answerButtons) {
        if ($(button).hasClass("active") &amp;&amp; ($(button).attr("data-answer") === correctAnswer) &amp;&amp; (secondsLeft > 0)) {
            correctAnswerSound.play();
            $(".answer-feedback").removeClass("hide-element").html("Well Done. Correct Answer!");
            $(button).removeClass("active").addClass("correct-answer no-shadow");
            $(button).children("p").children("span").html(`&lt;i class="fas fa-check">&lt;/i>`);
            score++;
            $(".quiz-score").html(`Score is ${score} / ${setOfQuestions.length}`);
        } else {
            if ($(button).hasClass("active")) {
                wrongAnswerSound.play();
                $(button).removeClass("active").addClass("wrong-answer no-shadow");
                $(button).children("p").children("span").html(`&lt;i class="fas fa-times">&lt;/i>`);
                $(".answer-feedback").removeClass("hide-element").html("Bad Luck. Wrong Answer!");
            }
            if (($(button).attr("data-answer") === correctAnswer)) {
                $(button).addClass("correct-answer");
            }
        }
    }
    // on smaller height screens scroll down to show the next question button
    if (setOfQuestions[questionIndex].type != "boolean" &amp;&amp; screen.availHeight &lt; 750) {
        setTimeout(function() {
            let elem = $(".question-answers").children(".answer")[0];
            elem.scrollIntoView({behaviour: "smooth"});
        }, 1500);    
    }
    // remove box shadow on all answers after a timeout
    setTimeout(function() {
        $(".answer").addClass("no-shadow");
        enableElement(".next-question");
    }, 1500);
}

/**
 * @function - Used to disable an element on screen
 * @param { Object | string } buttonIdentifier - a button element
 * @returns { void } nothing
 */
function disableElement(buttonIdentifier) {
    $(buttonIdentifier).prop("disabled", true);
}

/**
 * @function - Used to enable an element on screen
 * @param { Object | string } buttonIdentifier - a button element
 * @returns { void } nothing
 */
function enableElement(buttonIdentifier) {
    $(buttonIdentifier).prop("disabled", false);
}

/**
 * @function - Gets quiz data object containing questions and answers from the opentdb API
 * @param { string } myToken - token used to access the quiz API
 * @returns { void } nothing
 */
function getQuizData(myToken) {
    /** @type { string } opentdb API url address */
    let apiUrl = `https://opentdb.com/api.php?amount=${amount}&amp;category=${category}&amp;difficulty=${difficulty}&amp;token=${myToken}`;
    /** @type { Object } new instance of the object XMLHttpRequest */
    let xhr = new XMLHttpRequest();
    xhr.open("GET", apiUrl);
    xhr.send();
    console.log(apiUrl);
    /**
     * @function - Checks the status of the response from the quiz API and when ready and if ok calls to check the 
     * status of the token used otherwise alerts the user to an error obtaining quiz data
     * @returns { void } nothing
     */
    xhr.onreadystatechange = function () {
        console.log(this.readyState, this.status, score);
        if (this.readyState === 4 &amp;&amp; this.status === 200) {
            /** @type { Object } Will represent quiz data returned from opentdb API */
            let questionsLoaded = {};
            try {
                questionsLoaded = JSON.parse(this.responseText);
                // Check the token and start the Quiz
                checkToken(questionsLoaded);
            } catch (error) {
                $(".load-questions").html("Error. Press to Retry");
                alert(`${error.name}: Quiz Data not in correct format. ${alertErrorMessage}.`);
                enableElement(".load-questions");
            }            
        } else if (this.readyState === 4 &amp;&amp; this.status != 200) {
            $(".load-questions").html("Error. Press to Retry");
            alert(`Cannot communicate with the Quiz Database. ${alertErrorMessage}.`);
            enableElement(".load-questions");
        }
    };
}

/**
 * @function - Checks the token status and if ok begins the quiz, otherwise calls for a new token
 * @param { Object } questionsLoadedObject - quiz data object returned from opentdb API
 * @returns { void } nothing
 */
function checkToken(questionsLoadedObject) {
    score = 0;
    questionIndex = 0;
    console.log("token response", questionsLoadedObject.response_code);
    // response code 0 - successful return of results from api
    if (questionsLoadedObject.response_code === 0) {
        setOfQuestions = questionsLoadedObject.results;
        toggleOptions();
        // Start Quiz
        askQuestions(setOfQuestions, questionIndex, score);
        // response code 3 - session token not found by api
    } else if (questionsLoadedObject.response_code === 3) {
        getToken(tokenUrl).then(handleSuccess, handleFailure);
        // response code 4 - session token is empty and needs to be reset
    } else if (questionsLoadedObject.response_code === 4) {
        /** @type { string } opentdb API url address to reset token */
        let resetTokenUrl = `https://opentdb.com/api_token.php?command=reset&amp;token=${token}`;
        getToken(resetTokenUrl).then(handleSuccess, handleFailure);
    } else {
        // any other response means db could not return results
        alert(`Cannot get results from the Quiz Database at this time. ${alertErrorMessage}.`);
        $(".load-questions").html("Error. Press to Retry");
        enableElement(".load-questions");
    }
}

/**
 * @function - Handles a successful rsponse from the getToken function
 * @returns { void } nothing
 */
function handleSuccess(resolvedValue) {
    getQuizData(resolvedValue);
}

/**
 * @function - Handles an unsuccesful response from the getToken function
 * @returns { void } nothing
 */
function handleFailure(rejectionReason) {
    alert(rejectionReason);
    enableElement(".load-questions");
}

/**
 * @function - Requests a token from the opentdb API
 * @param { string } url - url for obtaining token to access the quiz API
 * @returns { Promise } returns a Promise Object which resolves to contain a token on success
 * or alerts the user to a problem if unsuccessful
 */
function getToken(url) {
    return new Promise(function(myResolve, myReject) {        
        /** @type { Object } new instance of the object XMLHttpRequest */
        let xhr = new XMLHttpRequest();
        xhr.open("GET", url);
        xhr.send();
        /**
         * @function - Checks the status of the response from the quiz API and when ready and if ok 
         * resolves to a token otherwise alerts the user to a problem
         */
        xhr.onreadystatechange = function() {
            console.log(this.readyState, this.status);
            if (this.readyState === 4 &amp;&amp; this.status === 200) {
                try {
                    token = (JSON.parse(this.responseText)).token;
                    sessionStorage.setItem("sessionToken", `${token}`);
                    console.log(token);
                    myResolve(token);
                } catch (error) {
                    $(".load-questions").html("Error. Press to Retry");
                    alert(`${error.name}: Quiz Token not in correct format. ${alertErrorMessage}.`);
                    enableElement(".load-questions");
                }
            } else if (this.readyState === 4 &amp;&amp; this.status != 200) {
                $(".load-questions").html("Error. Press to Retry");
                myReject(`Cannot obtain Quiz Token at this time. ${alertErrorMessage}.`);
            }
        };
    });
}

/**
 * @function - Check if a button is active &amp; gets its data attribute value
 * @param { Object } buttonGroup - represents a group of button elements
 * @returns { string } represents the answer text of that particular button
 */
function activeButton(buttonGroup) {
    for (let button of buttonGroup) {
        if ($(button).hasClass("active")) {
            let buttonValue = button.getAttribute("data-value");            
            return buttonValue;                 
        }
    }
}

// Timer inspired by Wes Bos version here:- https://github.com/wesbos/JavaScript30/blob/master/29%20-%20Countdown%20Timer/scripts-FINISHED.js
/**
 * @function - Countdown Timer
 * @param { number } seconds - Countdown timer starting number of seconds
 * @returns { void } nothing
 */
function timer(seconds) {
    /** @type { number } represents current time */
    let now = Date.now();
    /** @type { number } represents current time + timer value converted to milliseconds */
    let then = now + seconds * 1000;
    secondsLeft = questionTimer;
    // clear any existing timers
    clearInterval(countdown);
    displayTimeLeft(seconds);
    /**
     * @function - Interval timer which calculated and sets the secondsLeft every 1000ms
     */
    countdown = setInterval(function() {
        secondsLeft = Math.round((then - Date.now()) / 1000);
        // check if timer should be stopped
        if (secondsLeft &lt; 0) {
            clearInterval(countdown);
            return;
        // when timer reaches zero play sound and alert user
        } else if (secondsLeft === 0) {
            for (let button of answerButtons) {
                if (($(button).attr("data-answer") === correctAnswer)) {
                    $(button).addClass("correct-answer");
                    wrongAnswerSound.play();
                    enableElement(".next-question");
                }
                $(".answer").addClass("disable");
            }
        }
        // display it
        displayTimeLeft(secondsLeft);
    }, 1000);
}

/**
 * @function - Displays timer current value on screen
 * @param { number } remainderSeconds - Countdown timer remaining number of seconds
 * @returns { void } nothing
 */
function displayTimeLeft(remainderSeconds) {
    if (remainderSeconds === 0) {
        $(".display__time-left").html("Oops you ran out of time!");
        $(".answer").addClass("no-shadow");
    } else {
        $(".display__time-left").html(`You have &lt;span class="font-weight-bold">${remainderSeconds}&lt;/span> seconds remaining.`);
    }
    if (remainderSeconds &lt;= 5) {
        $(".display__time-left").addClass("time-critical");
    } else {
        $(".display__time-left").removeClass("time-critical");
    }
}

/**
 * @function - When the modal confirm button is clicked, stops the timer and returns to quiz options
 * @returns { void } nothing
 */
function resetConfirm() {
    buttonPress.play();
    clearInterval(countdown);
    toggleOptions();
    $("#resetModal").modal("toggle");
    $(".reset-button").show();
    $(".answer").removeClass("disable");
}

// Click Event Functions  ######################################################################
/**
 * @fires - When clicked sound on/off is toggled
 * @returns { void } nothing
 */
$(".mute-sound").on("click", function() {
    let soundOff = "&lt;i class='fas fa-volume-mute'>&lt;/i>";
    let soundOn = "&lt;i class='fas fa-volume-up'>&lt;/i>";
    let soundsArray = [correctAnswerSound, wrongAnswerSound, buttonPress, highScoreSound, wellDoneSound, sadSound];
    buttonPress.play();
    if ($(".mute-sound").attr("data-sound") === "off") {
        $(".mute-sound").html(soundOn);
        $(".mute-sound").attr("data-sound", "on");
        for (let item of soundsArray) {
            if (item === buttonPress) {
                item.sound.volume = 0.7;
            } else {
                item.sound.volume = 0.8;
            }                
        }       
    } else {
        $(".mute-sound").html(soundOff);
        $(".mute-sound").attr("data-sound", "off");
        for (let item of soundsArray) {
            item.sound.volume = 0;
        }
    }
});

/**
 * @fires - When button is clicked sets the pre quiz options and checks if a token already exists
 * @returns { void } nothing
 */
$(".load-questions").click(function() {
    buttonPress.play();
    disableElement(".quiz-options .btn");
    $(".load-questions").addClass("reduce-size").html("&lt;span class='spinner-border spinner-border-sm' role='status' aria-hidden='true'>&lt;/span> Loading...");
    $(".answer-feedback").addClass("hide-element");
    if (!!token === false) {
        getToken(tokenUrl).then(handleSuccess).catch(handleFailure);
    } else {
        getQuizData(token);
    }
});

/**
 * @fires - When the next question button is clicked calls the nextQuestion function
 * @returns { void } nothing
 */
$(".answer").on("click", function() {
    submitAnswer();
    $(this).addClass("active no-shadow disable");
    $(this).siblings().addClass("disable");    
});

/**
 * @fires - When the next question button is clicked calls the nextQuestion function
 * @returns { void } nothing
 */
$(".next-question").on("click", nextQuestion);

/**
 * @fires - When the Exit Quiz button is clicked displays a modal for the user to confirm
 * @returns { void } nothing
 */
$(".reset-button").on("click", function() {
    buttonPress.play();
    $(".modal-cancel").show();
    $(".reset-confirm").html("Yes");
    $("#resetModal").modal("toggle");
    $(".modal-content").html(
        `&lt;div class="modal-div">
            &lt;h5 class="reset-modal" id="resetModalLabel">EXIT QUIZ&lt;/h5>
        &lt;/div>
        &lt;div class="modal-body">
            Please confirm if you would like to exit the quiz...
        &lt;/div>
        &lt;div class="modal-footer">
            &lt;button type="button" class="btn btn-secondary modal-cancel" data-dismiss="modal" onclick="buttonPress.play()">No&lt;/button>
            &lt;button type="button" class="btn btn-primary reset-confirm" onclick="resetConfirm()">Yes&lt;/button>
        &lt;/div>`);
});

/**
 * @fires - Plays a sound when any button is clicked
 * @returns { void } nothing
 */
$("button").on("click", function() {
    buttonPress.play();
});

/**
 * @fires - Separates the multiple options bootstrap list groups on the same page 
 * and assigns text values to categories rather than numerical for high score table
 * @returns { void } nothing
 */
$("body").on("click", ".quiz-options .btn", function() {
    /* help from stackoverflow with the following two lines to separate the selections in multiple
        bootstrap button groups on same page */
    $(this).addClass("active no-shadow disable");
    $(this).siblings().removeClass("active disable no-shadow");
    category = activeButton(categoryButtons);
    amount = activeButton(quantityButtons);
    difficulty = activeButton(difficultyButtons);
    if (category === "18") {
        categoryString = "computing";
    } else if (category === "19") {
        categoryString = "mathematics";
    } else if (category === "17") {
        categoryString = "general";
    }    
    console.log(categoryString, category, difficulty, amount);
});</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Sound.html">Sound</a></li></ul><h3>Global</h3><ul><li><a href="global.html#-Checkifabuttonisactive&getsitsdataattributevalue">- Check if a button is active & gets its data attribute value</a></li><li><a href="global.html#-Checksifanansweriscorrectandprovidesvisualfeedback">- Checks if an answer is correct and provides visual feedback</a></li><li><a href="global.html#-ChecksthestatusoftheresponsefromthequizAPIandwhenreadyandifokresolvestoatokenotherwisealertstheusertoaproblem">- Checks the status of the response from the quiz API and when ready and if ok 
resolves to a token otherwise alerts the user to a problem</a></li><li><a href="global.html#-ChecksthestatusoftheresponsefromthequizAPIandwhenreadyandifokcallstocheckthestatusofthetokenusedotherwisealertstheusertoanerrorobtainingquizdata">- Checks the status of the response from the quiz API and when ready and if ok calls to check the 
status of the token used otherwise alerts the user to an error obtaining quiz data</a></li><li><a href="global.html#-CountdownTimer">- Countdown Timer</a></li><li><a href="global.html#-Displaystimercurrentvalueonscreen">- Displays timer current value on screen</a></li><li><a href="global.html#-Finishesthequizbypresentingaresultsmodeltothescreenandupdatingthehighscoreinlocalstorageifrequired">- Finishes the quiz by presenting a results model to the screen
and updating the high score in local storage if required</a></li><li><a href="global.html#-GetsquizdataobjectcontainingquestionsandanswersfromtheopentdbAPI">- Gets quiz data object containing questions and answers from the opentdb API</a></li><li><a href="global.html#-HandlesasuccessfulrsponsefromthegetTokenfunction">- Handles a successful rsponse from the getToken function</a></li><li><a href="global.html#-HandlesanunsuccesfulresponsefromthegetTokenfunction">- Handles an unsuccesful response from the getToken function</a></li><li><a href="global.html#-IntervaltimerwhichcalculatedandsetsthesecondsLeftevery1000ms">- Interval timer which calculated and sets the secondsLeft every 1000ms</a></li><li><a href="global.html#-Movesthequiztothenextquestion">- Moves the quiz to the next question</a></li><li><a href="global.html#-playsasoundfile">- plays a sound file</a></li><li><a href="global.html#-Preparesandpresentsthequizquestionstothescreen">- Prepares and presents the quiz questions to the screen</a></li><li><a href="global.html#-Removessurplusanswerbuttonsifthecurrentquestionisbooleanratherthanmultiplechoice&populatestheanswerbuttons">- Removes surplus answer buttons if the current question
is boolean rather than multiple choice & populates the answer buttons</a></li><li><a href="global.html#-RequestsatokenfromtheopentdbAPI">- Requests a token from the opentdb API</a></li><li><a href="global.html#-scrollstotoponpageload">- scrolls to top on page load</a></li><li><a href="global.html#-ShufflesquestionsusingTheFisher-YatesShuffleMethod">- Shuffles questions using The Fisher-Yates Shuffle Method</a></li><li><a href="global.html#-Submitsananswertobecheckedandresetsthetimer">- Submits an answer to be checked and resets the timer</a></li><li><a href="global.html#-switchesbetweenquizoptionsandquizquestions">- switches between quiz options and quiz questions</a></li><li><a href="global.html#-Usedtodisableanelementonscreen">- Used to disable an element on screen</a></li><li><a href="global.html#-Usedtoenableanelementonscreen">- Used to enable an element on screen</a></li><li><a href="global.html#alertErrorMessage">alertErrorMessage</a></li><li><a href="global.html#amount">amount</a></li><li><a href="global.html#answerButtons">answerButtons</a></li><li><a href="global.html#buttonPress">buttonPress</a></li><li><a href="global.html#category">category</a></li><li><a href="global.html#categoryButtons">categoryButtons</a></li><li><a href="global.html#categoryString">categoryString</a></li><li><a href="global.html#correctAnswer">correctAnswer</a></li><li><a href="global.html#correctAnswerSound">correctAnswerSound</a></li><li><a href="global.html#countdown">countdown</a></li><li><a href="global.html#difficulty">difficulty</a></li><li><a href="global.html#difficultyButtons">difficultyButtons</a></li><li><a href="global.html#highScore">highScore</a></li><li><a href="global.html#highScoreSound">highScoreSound</a></li><li><a href="global.html#quantityButtons">quantityButtons</a></li><li><a href="global.html#questionIndex">questionIndex</a></li><li><a href="global.html#questionTimer">questionTimer</a></li><li><a href="global.html#sadSound">sadSound</a></li><li><a href="global.html#score">score</a></li><li><a href="global.html#secondsLeft">secondsLeft</a></li><li><a href="global.html#setOfQuestions">setOfQuestions</a></li><li><a href="global.html#token">token</a></li><li><a href="global.html#tokenUrl">tokenUrl</a></li><li><a href="global.html#wellDoneSound">wellDoneSound</a></li><li><a href="global.html#wrongAnswerSound">wrongAnswerSound</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Wed Dec 02 2020 17:56:06 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
